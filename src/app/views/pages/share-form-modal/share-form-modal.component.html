<!-- Timesheet Form Component Template -->
<div class="p-6 bg-white">
  <h2 class="text-xl font-bold mb-4">{{ data?.id ? 'Edit Timesheet' : 'Timesheet Entry' }}</h2>
  
  <form [formGroup]="timesheetForm" (ngSubmit)="onSubmit()">
    <div class="">
      <div class="form-group w-[40%] mb-4">
        <label for="projectName" class="block font-medium mb-1">Project Name</label>
        <input 
          id="projectName"
          type="text"
          formControlName="projectName"
          class="border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
          [class.border-red-500]="isFieldInvalid('projectName')"
          placeholder="Enter project name"
        >
        <p 
          *ngIf="isFieldInvalid('projectName')" 
          class="text-red-500 text-xs italic mt-1"
        >
          {{ getErrorMessage('projectName') }}
        </p>
      </div>

      <div class="form-group w-[40%] mb-4">
        <label for="taskName" class="block font-medium mb-1">Task Name</label>
        <input 
          id="taskName"
          type="text"
          formControlName="taskName"
          class="border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
          [class.border-red-500]="isFieldInvalid('taskName')"
          placeholder="Enter task name"
        >
        <p 
          *ngIf="isFieldInvalid('taskName')" 
          class="text-red-500 text-xs italic mt-1"
        >
          {{ getErrorMessage('taskName') }}
        </p>
      </div>

      <div class="flex justify-between mb-4">
          <div class="form-group w-[40%] mr-2">
              <label for="from" class="block font-medium mb-1">Date From</label>
              <input 
                id="from"
                type="text"
                formControlName="from"
                readonly
                class="border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                [class.border-red-500]="isFieldInvalid('from')"
                [matDatepicker]="fromPicker"
              >
              <mat-datepicker-toggle matSuffix [for]="fromPicker" style="color: black;"></mat-datepicker-toggle>
              <mat-datepicker #fromPicker></mat-datepicker>
              <p 
                *ngIf="isFieldInvalid('from')" 
                class="text-red-500 text-xs italic mt-1"
              >
                {{ getErrorMessage('from') }}
              </p>
          </div>
      
          <div class="form-group w-[40%]">
              <label for="to" class="block font-medium mb-1">Date To</label>
              <input 
                id="to"
                type="text"
                formControlName="to"
                readonly
                class="border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                [class.border-red-500]="isFieldInvalid('to')"
                [matDatepicker]="toPicker"
              >
              <mat-datepicker-toggle matSuffix [for]="toPicker" style="color: black;"></mat-datepicker-toggle>
              <mat-datepicker #toPicker></mat-datepicker>
              <p 
                *ngIf="isFieldInvalid('to')" 
                class="text-red-500 text-xs italic mt-1"
              >
                {{ getErrorMessage('to') }}
              </p>
          </div>
      </div>
      
      <div class="form-group w-[40%] mb-4">
        <label for="status" class="block font-medium mb-1">Status</label>
        <select 
          id="status"
          formControlName="taskStatusId"
          class="border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
          [class.border-red-500]="isFieldInvalid('taskStatusId')"
        >
          <option value="">Select a Status</option>
          <option *ngFor="let status of statusOptions" [value]="status.id">
            {{ status.statusName }}
          </option>
        </select>
        <p 
          *ngIf="isFieldInvalid('taskStatusId')" 
          class="text-red-500 text-xs italic mt-1"
        >
          {{ getErrorMessage('taskStatusId') }}
        </p>
      </div>

      <div class="form-group w-[40%] mb-4">
          <label for="userId" class="block font-medium mb-1">Assign To</label>
          <select 
            id="userId"
            formControlName="userId"
            class="border border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"
            [class.border-red-500]="isFieldInvalid('userId')"
          >
            <option value="">Select a User</option>
            <option *ngFor="let user of users" [value]="user.id">
              {{ user.name }}
            </option>
          </select>
          <p 
            *ngIf="isFieldInvalid('userId')" 
            class="text-red-500 text-xs italic mt-1"
          >
            {{ getErrorMessage('userId') }}
          </p>
      </div>
    </div>

    <div class="flex justify-center mt-4">
      <button 
        type="submit"
        class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md mr-4"
      >
        {{ data?.id ? 'Save' : 'Create' }}
      </button>
      <button 
        type="button" 
        (click)="onCancel()"
        class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-md mr-2"
      >
        Cancel
      </button>
    </div>
  </form>
</div>